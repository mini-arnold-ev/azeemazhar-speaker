---
---

<form
  id="contact-form"
  class="space-y-6"
  action="/api/contact"
  method="POST"
>
  <!-- Honeypot field -->
  <div class="hidden" aria-hidden="true">
    <label for="website">Website</label>
    <input type="text" id="website" name="_gotcha" tabindex="-1" autocomplete="off" />
  </div>

  <div>
    <label for="name" class="label block mb-2">Name</label>
    <input
      type="text"
      id="name"
      name="name"
      required
      class="w-full border-b border-border bg-transparent py-3 text-body text-ink outline-none transition-colors focus:border-ink placeholder:text-muted/50"
      placeholder="Your name"
    />
  </div>

  <div>
    <label for="organisation" class="label block mb-2">Organisation</label>
    <input
      type="text"
      id="organisation"
      name="organisation"
      required
      class="w-full border-b border-border bg-transparent py-3 text-body text-ink outline-none transition-colors focus:border-ink placeholder:text-muted/50"
      placeholder="Company or organisation"
    />
  </div>

  <div>
    <label for="email" class="label block mb-2">Email</label>
    <input
      type="email"
      id="email"
      name="email"
      required
      class="w-full border-b border-border bg-transparent py-3 text-body text-ink outline-none transition-colors focus:border-ink placeholder:text-muted/50"
      placeholder="your@email.com"
    />
  </div>

  <div>
    <label for="event-date" class="label block mb-2">Event Date</label>
    <input
      type="text"
      id="event-date"
      name="event_date"
      class="w-full border-b border-border bg-transparent py-3 text-body text-ink outline-none transition-colors focus:border-ink placeholder:text-muted/50"
      placeholder="Approximate date is fine"
    />
  </div>

  <div>
    <label for="message" class="label block mb-2">What are you looking for?</label>
    <textarea
      id="message"
      name="message"
      rows="4"
      required
      class="w-full border-b border-border bg-transparent py-3 text-body text-ink outline-none transition-colors focus:border-ink placeholder:text-muted/50 resize-none"
      placeholder="Brief description of your event and what you hope to achieve"
    ></textarea>
  </div>

  <input type="hidden" name="_subject" value="New speaking enquiry from azeemazhar.com" />

  <div class="pt-4">
    <button type="submit" class="btn-primary">
      Send Message
    </button>
  </div>

  <div id="form-success" class="hidden pt-4">
    <p class="text-body text-ink">Thank you. We'll be in touch within 48 hours.</p>
  </div>
</form>

<script>
  const form = document.getElementById("contact-form") as HTMLFormElement;
  const success = document.getElementById("form-success");

  form?.addEventListener("submit", async (e) => {
    e.preventDefault();
    const honeypot = (form.querySelector('[name="_gotcha"]') as HTMLInputElement)?.value;
    if (honeypot) return;

    const formData = new FormData(form);

    try {
      const response = await fetch(form.action, {
        method: "POST",
        body: formData,
        headers: { "Accept": "application/json" },
      });

      if (response.ok) {
        form.style.display = "none";
        success?.classList.remove("hidden");
      } else {
        alert("Something went wrong. Please try again or email directly.");
      }
    } catch {
      alert("Something went wrong. Please try again or email directly.");
    }
  });
</script>
